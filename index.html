<!DOCTYPE html>
<html lang="th">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Gearlaxy Power Pool Model - Community Energy Trading and Management System">
  <meta name="keywords" content="energy management, solar power, EV charging, smart home">
  <title>Gearlaxy Power Pool Model</title>

  <!-- Fonts - Inter for English, Kanit for Thai -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Kanit:wght@300;400;500;600;700&display=swap"
    rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

  <!-- Custom Styles -->
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="enhanced-global.css">
  <link rel="stylesheet" href="electricity-trading-styles.css">
  <link rel="stylesheet" href="central-solar-styles.css">
  <link rel="stylesheet" href="digital-twin-styles.css">
  <link rel="stylesheet" href="ev-management-styles.css">
  <link rel="stylesheet" href="usage-history-styles.css">
  <link rel="stylesheet" href="profit-analysis-styles.css">
</head>

<body>
  <div class="app-container">
    <!-- Sidebar Navigation -->
    <aside class="sidebar">
      <div class="logo">
        <img src="Logo_Energy.png" alt="Gearlaxy Logo" class="logo-image">
        <div class="logo-text">
          <h1>Gearlaxy</h1>
          <p>Power Pool<br>Model</p>
        </div>
      </div>

      <nav>
        <ul class="nav-menu">
          <li class="nav-item">
            <a href="#" class="nav-link active" data-page="dashboard">
              <i class="nav-icon fas fa-chart-line"></i>
              <span>Dashboard</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link" data-page="digital-twin">
              <i class="nav-icon fas fa-calculator"></i>
              <span>Digital Twin</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link" data-page="ev-management">
              <i class="nav-icon fas fa-charging-station"></i>
              <span>EV Management</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link" data-page="usage-history">
              <i class="nav-icon fas fa-history"></i>
              <span>Usage History</span>
            </a>
          </li>

          <li class="nav-divider">CENTRAL SYSTEM</li>

          <li class="nav-item">
            <a href="#" class="nav-link" data-page="central-solar">
              <i class="nav-icon fas fa-solar-panel"></i>
              <span>Central Solar</span>
            </a>
          </li>

          <li class="nav-divider">TRADING SYSTEM</li>

          <li class="nav-item">
            <a href="#" class="nav-link" data-page="buy-electricity">
              <i class="nav-icon fas fa-shopping-cart"></i>
              <span>Buy Electricity</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link" data-page="sell-electricity">
              <i class="nav-icon fas fa-hand-holding-usd"></i>
              <span>Sell Electricity</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link" data-page="profit-analysis">
              <i class="nav-icon fas fa-chart-pie"></i>
              <span>Profit Analysis</span>
            </a>
          </li>
        </ul>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Page 1: Dashboard -->
      <div id="dashboard" class="page active">
        <!-- Content extracted... -->
        <!-- Don't change dashboard content -->
        <div class="page-header">
          <div>
            <h2 class="page-title">
              <i class="fas fa-chart-line" style="margin-right: 1rem;"></i>
              Dashboard
            </h2>
            <p class="page-subtitle">Real-time monitoring of community energy consumption and production</p>
          </div>
        </div>

        <!-- Summary Stats -->
        <div class="grid grid-4 mb-4">
          <div class="stat-card">
            <div class="stat-icon danger">
              <i class="fas fa-bolt"></i>
            </div>
            <div class="stat-info">
              <div class="stat-label">Total Consumption</div>
              <div class="stat-value" id="total-consumption">0 kW</div>
              <div class="stat-change positive">
                <i class="fas fa-arrow-down"></i>
                <span>5.2% from yesterday</span>
              </div>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon primary">
              <i class="fas fa-home"></i>
            </div>
            <div class="stat-info">
              <div class="stat-label">Total Houses</div>
              <div class="stat-value" id="total-houses">12</div>
              <div class="stat-change positive">
                <i class="fas fa-check-circle"></i>
                <span>All Online</span>
              </div>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon warning">
              <i class="fas fa-sun"></i>
            </div>
            <div class="stat-info">
              <div class="stat-label">Solar Production</div>
              <div class="stat-value" id="solar-production">0 kW</div>
              <div class="stat-change positive">
                <i class="fas fa-sun"></i>
                <span>Producing</span>
              </div>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon success">
              <i class="fas fa-battery-three-quarters"></i>
            </div>
            <div class="stat-info">
              <div class="stat-label">Battery Level</div>
              <div class="stat-value" id="battery-level">0%</div>
              <div class="stat-change positive">
                <i class="fas fa-battery-three-quarters"></i>
                <span>Good Status</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Real-time Chart -->
        <div class="card mb-4">
          <div class="card-header">
            <h3 class="card-title">Real-time Power Usage</h3>
          </div>
          <div class="card-body">
            <div class="chart-container">
              <canvas id="realtime-chart"></canvas>
            </div>
          </div>
        </div>

        <!-- House Cards -->
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Power Usage by House</h3>
          </div>
          <div class="card-body">
            <div class="grid grid-3" id="house-cards-container">
              <!-- House cards will be generated here -->
            </div>
          </div>
        </div>
      </div>

      <!-- Page 2: Digital Twin Calculator -->
      <div id="digital-twin" class="page">
        <!-- Content extracted... -->
        <!-- Don't change digital twin content -->
        <div class="page-header">
          <div>
            <h2 class="page-title">
              <i class="fas fa-calculator" style="margin-right: 1rem;"></i>
              Digital Twin Calculator
            </h2>
            <p class="page-subtitle">Calculate Solar Cell Requirements and Backup Duration</p>
          </div>
        </div>

        <div class="grid grid-2">
          <!-- Solar Cell Calculator -->
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">
                <i class="fas fa-solar-panel" style="color: #f59e0b;"></i>
                Solar Cell Calculator
              </h3>
            </div>
            <div class="card-body">
              <div class="form-group">
                <label class="form-label">Select House</label>
                <select id="solar-calc-house" class="form-select">
                  <option value="">-- Select House --</option>
                </select>
              </div>

              <div class="form-group">
                <label class="form-label">Average Daily Consumption (kWh)</label>
                <input type="number" id="daily-consumption-input" class="form-input" value="50" step="0.1">
              </div>

              <button class="btn btn-primary" onclick="calculateSolar()">
                <i class="fas fa-calculator"></i>
                Calculate
              </button>

              <div id="solar-calc-result" class="mt-3" style="display: none;">
                <div class="alert alert-info">
                  <i class="fas fa-info-circle"></i>
                  <div>
                    <h4 style="margin-bottom: 0.5rem;">Calculation Results</h4>
                    <p style="margin: 0.25rem 0;"><strong>Recommended System Size:</strong> <span
                        id="recommended-capacity"></span> kW</p>
                    <p style="margin: 0.25rem 0;"><strong>Number of Solar Panels:</strong> <span
                        id="panel-count"></span>
                      panels (400W/panel)</p>
                    <p style="margin: 0.25rem 0;"><strong>Estimated Cost:</strong> <span id="estimated-cost"></span> THB
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Backup Duration Calculator -->
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">
                <i class="fas fa-battery-full" style="color: #10b981;"></i>
                Backup Duration Calculator
              </h3>
            </div>
            <div class="card-body">
              <div class="alert alert-info" style="margin-bottom: 1rem; padding: 0.75rem; font-size: 0.9rem;">
                <i class="fas fa-info-circle"></i>
                <span>Select a house to auto-fill with real data, or enter values manually</span>
              </div>

              <div class="form-group">
                <label class="form-label">Select House (Optional)</label>
                <select id="backup-house-select" class="form-select" onchange="fillBackupFromHouse()">
                  <option value="">-- Select House or Enter Manually --</option>
                </select>
              </div>

              <div class="form-group">
                <label class="form-label">Solar Cell Capacity (kW)</label>
                <input type="number" id="backup-solar-capacity" class="form-input" value="5" step="0.1">
              </div>

              <div class="form-group">
                <label class="form-label">Battery Capacity (kWh)</label>
                <input type="number" id="backup-battery-capacity" class="form-input" value="10" step="0.1">
              </div>

              <div class="form-group">
                <label class="form-label">Average Consumption (kW)</label>
                <input type="number" id="backup-consumption" class="form-input" value="3" step="0.1">
              </div>

              <button class="btn btn-primary" onclick="calculateBackup()">
                <i class="fas fa-clock"></i>
                Calculate
              </button>

              <div id="backup-calc-result" class="mt-3" style="display: none;">
                <div class="alert alert-success">
                  <i class="fas fa-check-circle"></i>
                  <div>
                    <h4 style="margin-bottom: 0.5rem;">Calculation Results</h4>
                    <p style="margin: 0.25rem 0;"><strong>Backup Duration:</strong> <span id="backup-hours"></span>
                      hours</p>
                    <p style="margin: 0.25rem 0;"><strong>Solar Power Contribution:</strong> <span
                        id="solar-contribution"></span> kW</p>
                    <p style="margin: 0.25rem 0;"><strong>Net Consumption:</strong> <span id="net-consumption"></span>
                      kW
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Visualization -->
        <div class="card mt-4">
          <div class="card-header">
            <h3 class="card-title">Power Usage Comparison by House</h3>
          </div>
          <div class="card-body">
            <div class="chart-container">
              <canvas id="comparison-chart"></canvas>
            </div>
          </div>
        </div>
      </div>

      <!-- Page 3: Buy Electricity (Middleman - Receive from Sellers) -->
      <div id="buy-electricity" class="page">
        <div class="page-header">
          <div style="flex: 1;">
            <h2 class="page-title">
              <i class="fas fa-shopping-cart" style="margin-right: 1rem;"></i>
              Buy Electricity
            </h2>
            <p class="page-subtitle">รับซื้อไฟฟ้าจากบ้านในหมู่บ้านที่ต้องการขาย</p>
          </div>

          <!-- Reserve Energy Display -->
          <div class="reserve-energy-card">
            <div class="reserve-icon">
              <i class="fas fa-battery-three-quarters"></i>
            </div>
            <div class="reserve-info">
              <div class="reserve-label">พลังงานสำรอง (ของคุณ)</div>
              <div class="reserve-value" id="buy-reserve-energy">0 kWh</div>
            </div>
          </div>
        </div>

        <!-- Market Overview -->
        <div class="grid grid-3 mb-4">
          <div class="stat-card">
            <div class="stat-label">Houses Selling</div>
            <div class="stat-value" id="buy-surplus-count">0</div>
            <div class="stat-change positive">
              <i class="fas fa-home"></i>
              <span id="buy-total-surplus">0 kW</span>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-label">TOU Price (รับซื้อ)</div>
            <div class="stat-value" id="buy-tou-price">0 ฿</div>
            <div class="stat-change">
              <i class="fas fa-clock"></i>
              <span id="buy-price-period">Peak Hours</span>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-label">Fixed Price (รับซื้อ)</div>
            <div class="stat-value" id="buy-fixed-price">0 ฿</div>
            <div class="stat-change">
              <i class="fas fa-dollar-sign"></i>
              <span>คงที่</span>
            </div>
          </div>
        </div>

        <!-- All Sellers Table -->
        <div class="card mb-4">
          <div class="card-header">
            <h3 class="card-title">
              <i class="fas fa-store"></i>
              บ้านที่ต้องการขายไฟฟ้า (Sellers)
            </h3>
          </div>
          <div class="card-body">
            <div class="pricing-table-container">
              <table class="pricing-table">
                <thead>
                  <tr>
                    <th>บ้าน</th>
                    <th>ไฟเหลือขาย</th>
                    <th>จำนวนที่รับซื้อ (kW)</th>
                    <th>ราคารับซื้อ (Fixed Rate)</th>
                    <th>รวม</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody id="all-sellers-list">
                  <!-- All sellers will be populated here -->
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Transaction History -->
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">
              <i class="fas fa-history"></i>
              ประวัติการรับซื้อ
            </h3>
          </div>
          <div class="card-body">
            <div id="buy-transaction-history">
              <div class="empty-state">
                <i class="fas fa-receipt"></i>
                <p>No purchases yet</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Page 4: Sell Electricity (Middleman - Sell to Buyers) -->
      <div id="sell-electricity" class="page">
        <div class="page-header">
          <div style="flex: 1;">
            <h2 class="page-title">
              <i class="fas fa-hand-holding-usd" style="margin-right: 1rem;"></i>
              Sell Electricity
            </h2>
            <p class="page-subtitle">ขายไฟฟ้าให้บ้านในหมู่บ้านที่ต้องการซื้อ</p>
          </div>

          <!-- Reserve Energy Display -->
          <div class="reserve-energy-card">
            <div class="reserve-icon">
              <i class="fas fa-battery-three-quarters"></i>
            </div>
            <div class="reserve-info">
              <div class="reserve-label">พลังงานสำรอง (ของคุณ)</div>
              <div class="reserve-value" id="sell-reserve-energy">0 kWh</div>
            </div>
          </div>
        </div>

        <!-- Market Overview -->
        <div class="grid grid-3 mb-4">
          <div class="stat-card">
            <div class="stat-label">Houses Buying</div>
            <div class="stat-value" id="sell-deficit-count">0</div>
            <div class="stat-change negative">
              <i class="fas fa-home"></i>
              <span id="sell-total-deficit">0 kW</span>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-label">TOU Price (ขาย)</div>
            <div class="stat-value" id="sell-tou-price">0 ฿</div>
            <div class="stat-change">
              <i class="fas fa-clock"></i>
              <span id="sell-price-period">Peak Hours</span>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-label">Fixed Price (ขาย)</div>
            <div class="stat-value" id="sell-fixed-price">0 ฿</div>
            <div class="stat-change">
              <i class="fas fa-dollar-sign"></i>
              <span>คงที่</span>
            </div>
          </div>
        </div>

        <!-- All Buyers Table -->
        <div class="card mb-4">
          <div class="card-header">
            <h3 class="card-title">
              <i class="fas fa-users"></i>
              บ้านที่ต้องการซื้อไฟฟ้า (Buyers)
            </h3>
          </div>
          <div class="card-body">
            <div class="pricing-table-container">
              <table class="pricing-table">
                <thead>
                  <tr>
                    <th>บ้าน</th>
                    <th>ต้องการซื้อ</th>
                    <th>จำนวนที่ขาย (kW)</th>
                    <th>เลือกราคา</th>
                    <th>รวม</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody id="all-buyers-list">
                  <!-- All buyers will be populated here -->
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Transaction History -->
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">
              <i class="fas fa-history"></i>
              ประวัติการขาย
            </h3>
          </div>
          <div class="card-body">
            <div id="sell-transaction-history">
              <div class="empty-state">
                <i class="fas fa-receipt"></i>
                <p>No sales yet</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Page 5: Profit Analysis -->
      <div id="profit-analysis" class="page">
        <div class="page-header">
          <div>
            <h2 class="page-title">
              <i class="fas fa-chart-pie" style="margin-right: 1rem;"></i>
              Profit / Loss Analysis
            </h2>
            <p class="page-subtitle">วิเคราะห์กำไรขาดทุนจากการซื้อขายไฟฟ้า</p>
          </div>
        </div>

        <!-- Summary Stats -->
        <div class="grid grid-4 mb-4">
          <div class="stat-card">
            <div class="stat-label">Total Buy Volume</div>
            <div class="stat-value" id="pl-total-buy-volume">0 kWh</div>
            <div class="stat-change negative">
              <i class="fas fa-shopping-cart"></i>
              <span id="pl-total-buy-cost">0 ฿</span>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-label">Total Sell Volume</div>
            <div class="stat-value" id="pl-total-sell-volume">0 kWh</div>
            <div class="stat-change positive">
              <i class="fas fa-hand-holding-usd"></i>
              <span id="pl-total-sell-revenue">0 ฿</span>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-label">Energy Holding</div>
            <div class="stat-value" id="pl-energy-holding">0 kWh</div>
            <div class="stat-change">
              <i class="fas fa-battery-half"></i>
              <span>In Stock</span>
            </div>
          </div>

          <div class="stat-card highlight">
            <div class="stat-label">Net Profit</div>
            <div class="stat-value" id="pl-net-profit">0 ฿</div>
            <div class="stat-change" id="pl-profit-percent">
              <i class="fas fa-chart-line"></i>
              <span>Margin: 0%</span>
            </div>
          </div>
        </div>

        <!-- Charts -->
        <div class="grid grid-2 mb-4">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Revenue vs Cost</h3>
            </div>
            <div class="card-body">
              <div class="chart-container">
                <canvas id="pl-revenue-chart"></canvas>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Trading Volume (kWh)</h3>
            </div>
            <div class="card-body">
              <div class="chart-container">
                <canvas id="pl-volume-chart"></canvas>
              </div>
            </div>
          </div>
        </div>

        <!-- Detailed Transaction Table -->
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Transaction Log</h3>
          </div>
          <div class="card-body">
            <div class="pricing-table-container">
              <table class="pricing-table">
                <thead>
                  <tr>
                    <th>Time</th>
                    <th>Type</th>
                    <th>Partner</th>
                    <th>Volume (kWh)</th>
                    <th>Price/Unit</th>
                    <th>Total (฿)</th>
                    <th>Balance</th>
                  </tr>
                </thead>
                <tbody id="pl-transaction-list">
                  <!-- Transactions will be populated here -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- Page 4: EV Management -->
      <div id="ev-management" class="page">
        <div class="page-header">
          <div>
            <h2 class="page-title">
              <i class="fas fa-charging-station" style="margin-right: 1rem;"></i>
              EV Management
            </h2>
            <p class="page-subtitle">Electric Vehicle Charging Management System</p>
          </div>
        </div>

        <!-- EV Stats -->
        <div class="grid grid-4 mb-4">
          <div class="stat-card">
            <div class="stat-label">Total Vehicles</div>
            <div class="stat-value" id="total-evs">0</div>
            <div class="stat-change positive">
              <i class="fas fa-car"></i>
              <span>Registered</span>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-label">Currently Charging</div>
            <div class="stat-value" id="charging-evs">0</div>
            <div class="stat-change positive">
              <i class="fas fa-charging-station"></i>
              <span>Vehicles</span>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-label">Power Consumption</div>
            <div class="stat-value" id="ev-power-consumption">0 kW</div>
            <div class="stat-change">
              <i class="fas fa-bolt"></i>
              <span>Current</span>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-label">Daily Cost</div>
            <div class="stat-value" id="ev-daily-cost">0 ฿</div>
            <div class="stat-change">
              <i class="fas fa-coins"></i>
              <span>Estimated</span>
            </div>
          </div>
        </div>

        <!-- EV List -->
        <div class="card mb-4">
          <div class="card-header">
            <h3 class="card-title">Electric Vehicle List</h3>
          </div>
          <div class="card-body">
            <div id="ev-list">
              <!-- EV cards will be generated here -->
            </div>
          </div>
        </div>

        <!-- EV Charts -->
        <div class="grid grid-2">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Charging Status</h3>
            </div>
            <div class="card-body">
              <div class="chart-container">
                <canvas id="ev-status-chart"></canvas>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Daily EV Energy Consumption</h3>
            </div>
            <div class="card-body">
              <div class="chart-container">
                <canvas id="ev-consumption-chart"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Page 5: Usage History -->
      <div id="usage-history" class="page">
        <div class="page-header">
          <div>
            <h2 class="page-title">
              <i class="fas fa-history" style="margin-right: 1rem;"></i>
              Usage History
            </h2>
            <p class="page-subtitle">Power Usage History for Each House</p>
          </div>
        </div>

        <!-- Filters -->
        <div class="card mb-4">
          <div class="card-body">
            <div class="grid grid-3">
              <div class="form-group">
                <label class="form-label">Select House</label>
                <select id="history-house-select" class="form-select" onchange="updateHistory()">
                  <option value="">-- Select House --</option>
                </select>
              </div>

              <div class="form-group">
                <label class="form-label">Time Period</label>
                <select id="history-period-select" class="form-select" onchange="updateHistory()">
                  <option value="hourly">Last 24 Hours</option>
                  <option value="daily">Last 30 Days</option>
                  <option value="monthly">Last 12 Months</option>
                </select>
              </div>

              <div class="form-group">
                <label class="form-label">&nbsp;</label>
                <button class="btn btn-primary" onclick="exportData()" style="width: 100%;">
                  <i class="fas fa-download"></i>
                  Export CSV
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- House Info -->
        <div id="house-info-card" class="card mb-4" style="display: none;">
          <div class="card-header">
            <h3 class="card-title" id="selected-house-name">House Information</h3>
          </div>
          <div class="card-body">
            <div class="grid grid-4">
              <div>
                <div class="stat-label">Current Usage</div>
                <div class="stat-value" style="font-size: 1.5rem;" id="house-current-consumption">0 kW</div>
              </div>
              <div>
                <div class="stat-label">Daily Usage</div>
                <div class="stat-value" style="font-size: 1.5rem;" id="house-daily-consumption">0 kWh</div>
              </div>
              <div>
                <div class="stat-label">Monthly Usage</div>
                <div class="stat-value" style="font-size: 1.5rem;" id="house-monthly-consumption">0 kWh</div>
              </div>
              <div>
                <div class="stat-label">Residents</div>
                <div class="stat-value" style="font-size: 1.5rem;" id="house-residents">0 people</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Usage Chart -->
        <div class="card mb-4">
          <div class="card-header">
            <h3 class="card-title">Power Usage Chart</h3>
          </div>
          <div class="card-body">
            <div class="chart-container" style="height: 400px;">
              <canvas id="history-chart"></canvas>
            </div>
          </div>
        </div>

        <!-- Appliance Breakdown -->
        <div class="grid grid-2">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Power Usage by Appliance</h3>
            </div>
            <div class="card-body">
              <div class="chart-container">
                <canvas id="appliance-chart"></canvas>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Comparison with Average</h3>
            </div>
            <div class="card-body">
              <div class="chart-container">
                <canvas id="comparison-avg-chart"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Page: Central Solar -->
      <div id="central-solar" class="page">
        <header class="cs-page-header">
          <div class="cs-header-content">
            <div class="cs-header-text">
              <h2 class="cs-page-title">
                <i class="fas fa-solar-panel cs-title-icon"></i>
                Central Solar System
              </h2>
              <p class="cs-page-subtitle">Monitor central solar status, energy storage, and production efficiency in
                real-time</p>
            </div>
            <div class="cs-header-badges">
              <div class="cs-status-badge cs-active">
                <div class="cs-status-pulse"></div>
                <i class="fas fa-circle"></i>
                <span>System Active</span>
              </div>
              <div class="cs-weather-badge">
                <i class="fas fa-sun"></i>
                <div class="cs-weather-text">
                  <span class="cs-temp">32°C</span>
                  <span class="cs-uv">UV High</span>
                </div>
              </div>
            </div>
          </div>
        </header>

        <!-- Enhanced Stats Grid -->
        <div class="cs-stats-grid">
          <!-- Production Card -->
          <div class="cs-stat-card cs-card-production">
            <div class="cs-card-glow cs-glow-orange"></div>
            <div class="cs-stat-icon-wrapper">
              <div class="cs-stat-icon cs-icon-production">
                <i class="fas fa-sun"></i>
                <div class="cs-icon-rays"></div>
              </div>
            </div>
            <div class="cs-stat-content">
              <p class="cs-stat-label">Current Production</p>
              <h3 class="cs-stat-value" id="cs-current-production">0.00 kW</h3>
              <div class="cs-stat-footer">
                <span class="cs-stat-badge cs-badge-success">
                  <i class="fas fa-arrow-up"></i> Capacity: 85%
                </span>
              </div>
            </div>
          </div>

          <!-- Battery Card -->
          <div class="cs-stat-card cs-card-battery">
            <div class="cs-card-glow cs-glow-green"></div>
            <div class="cs-stat-icon-wrapper">
              <div class="cs-stat-icon cs-icon-battery">
                <i class="fas fa-battery-three-quarters"></i>
                <div class="cs-battery-level-indicator"></div>
              </div>
            </div>
            <div class="cs-stat-content">
              <p class="cs-stat-label">Battery Storage</p>
              <h3 class="cs-stat-value" id="cs-battery-level">76%</h3>
              <div class="cs-stat-footer">
                <span class="cs-stat-badge cs-badge-info">
                  <i class="fas fa-database"></i> Total: 120 kWh
                </span>
              </div>
            </div>
          </div>

          <!-- Daily Output Card -->
          <div class="cs-stat-card cs-card-output">
            <div class="cs-card-glow cs-glow-blue"></div>
            <div class="cs-stat-icon-wrapper">
              <div class="cs-stat-icon cs-icon-output">
                <i class="fas fa-bolt"></i>
                <div class="cs-bolt-flash"></div>
              </div>
            </div>
            <div class="cs-stat-content">
              <p class="cs-stat-label">Daily Output</p>
              <h3 class="cs-stat-value" id="cs-daily-output">342 kWh</h3>
              <div class="cs-stat-footer">
                <span class="cs-stat-badge cs-badge-success">
                  <i class="fas fa-chart-line"></i> +12% vs Avg
                </span>
              </div>
            </div>
          </div>

          <!-- CO2 Saved Card -->
          <div class="cs-stat-card cs-card-eco">
            <div class="cs-card-glow cs-glow-emerald"></div>
            <div class="cs-stat-icon-wrapper">
              <div class="cs-stat-icon cs-icon-eco">
                <i class="fas fa-leaf"></i>
                <div class="cs-leaf-float"></div>
              </div>
            </div>
            <div class="cs-stat-content">
              <p class="cs-stat-label">CO₂ Avoided</p>
              <h3 class="cs-stat-value" id="cs-co2-saved">158 kg</h3>
              <div class="cs-stat-footer">
                <span class="cs-stat-badge cs-badge-eco">
                  <i class="fas fa-seedling"></i> Today
                </span>
              </div>
            </div>
          </div>
        </div>

        <!-- Main Content Grid -->
        <div class="cs-main-grid">
          <!-- Production Chart -->
          <div class="cs-chart-card">
            <div class="cs-chart-header">
              <div class="cs-chart-title-group">
                <h3 class="cs-chart-title">Real-time Solar Production</h3>
                <p class="cs-chart-subtitle">24-hour production and irradiance tracking</p>
              </div>
              <div class="cs-chart-badges">
                <span class="cs-live-badge">
                  <span class="cs-live-dot"></span>
                  Live
                </span>
                <button class="cs-chart-btn">
                  <i class="fas fa-expand"></i>
                </button>
              </div>
            </div>
            <div class="cs-chart-body">
              <div class="cs-chart-container">
                <canvas id="cs-production-chart"></canvas>
              </div>
            </div>
          </div>

          <!-- System Health Panel -->
          <div class="cs-health-card">
            <div class="cs-health-header">
              <h3 class="cs-health-title">
                <i class="fas fa-heartbeat"></i>
                System Health
              </h3>
              <span class="cs-health-status cs-status-optimal">Optimal</span>
            </div>

            <div class="cs-health-body">
              <!-- Health Metrics -->
              <div class="cs-health-list">
                <div class="cs-health-item">
                  <div class="cs-health-icon cs-health-primary">
                    <i class="fas fa-server"></i>
                  </div>
                  <div class="cs-health-info">
                    <span class="cs-health-label">Inverter A</span>
                    <span class="cs-health-value">Normal</span>
                  </div>
                  <div class="cs-health-indicator cs-indicator-ok"></div>
                </div>

                <div class="cs-health-item">
                  <div class="cs-health-icon cs-health-primary">
                    <i class="fas fa-server"></i>
                  </div>
                  <div class="cs-health-info">
                    <span class="cs-health-label">Inverter B</span>
                    <span class="cs-health-value">Normal</span>
                  </div>
                  <div class="cs-health-indicator cs-indicator-ok"></div>
                </div>

                <div class="cs-health-item">
                  <div class="cs-health-icon cs-health-warning">
                    <i class="fas fa-solar-panel"></i>
                  </div>
                  <div class="cs-health-info">
                    <span class="cs-health-label">Array Efficiency</span>
                    <span class="cs-health-value cs-value-highlight">94.2%</span>
                  </div>
                  <div class="cs-health-indicator cs-indicator-ok"></div>
                </div>

                <div class="cs-health-item">
                  <div class="cs-health-icon cs-health-danger">
                    <i class="fas fa-thermometer-half"></i>
                  </div>
                  <div class="cs-health-info">
                    <span class="cs-health-label">Panel Temp</span>
                    <span class="cs-health-value">45°C</span>
                  </div>
                  <div class="cs-health-indicator cs-indicator-ok"></div>
                </div>

                <div class="cs-health-item">
                  <div class="cs-health-icon cs-health-muted">
                    <i class="fas fa-wrench"></i>
                  </div>
                  <div class="cs-health-info">
                    <span class="cs-health-label">Last Maintenance</span>
                    <span class="cs-health-value cs-value-muted">12 Jan 2026</span>
                  </div>
                </div>
              </div>

              <!-- Energy Distribution -->
              <div class="cs-distribution-section">
                <h4 class="cs-distribution-title">
                  <i class="fas fa-chart-pie"></i>
                  Energy Distribution
                </h4>

                <div class="cs-distribution-item">
                  <div class="cs-dist-header">
                    <span class="cs-dist-label">
                      <i class="fas fa-plug"></i> To Grid
                    </span>
                    <span class="cs-dist-percent">20%</span>
                  </div>
                  <div class="cs-progress-bar">
                    <div class="cs-progress-fill cs-fill-warning" style="width: 20%">
                      <div class="cs-progress-shine"></div>
                    </div>
                  </div>
                </div>

                <div class="cs-distribution-item">
                  <div class="cs-dist-header">
                    <span class="cs-dist-label">
                      <i class="fas fa-battery-half"></i> To Storage
                    </span>
                    <span class="cs-dist-percent">35%</span>
                  </div>
                  <div class="cs-progress-bar">
                    <div class="cs-progress-fill cs-fill-success" style="width: 35%">
                      <div class="cs-progress-shine"></div>
                    </div>
                  </div>
                </div>

                <div class="cs-distribution-item">
                  <div class="cs-dist-header">
                    <span class="cs-dist-label">
                      <i class="fas fa-home"></i> Direct Use
                    </span>
                    <span class="cs-dist-percent">45%</span>
                  </div>
                  <div class="cs-progress-bar">
                    <div class="cs-progress-fill cs-fill-primary" style="width: 45%">
                      <div class="cs-progress-shine"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Scripts -->
  <script src="data.js"></script>
  <script src="charts.js"></script>
  <script src="dashboard.js"></script>
  <script src="digital-twin.js"></script>
  <script src="electricity-trading.js"></script>
  <script src="ev-management.js"></script>
  <script src="usage-history.js"></script>
  <script src="central-solar.js"></script>
  <script src="app.js"></script>
</body>

</html>